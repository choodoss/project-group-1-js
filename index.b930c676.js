var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequire1995;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var l={id:e,exports:{}};return t[e]=l,n.call(l.exports,l,l.exports),l.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},e.parcelRequire1995=n),n.register("ggI8S",(function(e,t){var a,n,l,o;a=e.exports,n="default",l=()=>i,Object.defineProperty(a,n,{get:l,set:o,enumerable:!0,configurable:!0});var i={popularFilm:["movie/popular"],searchMovie:"search/movie",movieDetails:"movie/",genre:["genre/tv/list","genre/movie/list"]}}));var l=n("gxwgI"),o=n("3nfqI"),i=n("ggI8S"),s=n("19McP"),r=(l=n("gxwgI"),i=n("ggI8S"),n("l2HVM")),c=n("5rHMg");const u=new(0,r.DatabaseAPI),d=document.querySelector(".header-nav__title--lib");let p,m;async function v({id:e,poster:t,genres:a,title:n,original:o,popularity:s,average:r,count:c}){const d=document.querySelector(".about-film");try{const{overview:v}=await(0,l.getDataFilm)(`${i.default.movieDetails}${e}`,{language:"en-US"}),h=await(0,l.getDataFilm)(`${i.default.movieDetails}${e}/videos`,{language:"en-US"}),y=await u.getWatchedList(),_=await u.getQueueList(),b=`https://www.youtube.com/watch?v=${h.results[0].key}`;let w,q;y.includes(e)&&(w="remove at Watched"),_.includes(e)&&(q="remove at queue"),d.innerHTML=`\n      <img class="about-film__img" src="${t}" />\n      <div class="about-film__body">\n        <h3 class="film__title">${n}</h3>\n        <div class="film-atributes">\n          <ul class="film-properties">\n            <li class="film-properties__item">\n              <p class="property">Vote / Votes</p>\n            </li>\n            <li class="film-properties__item">\n              <p class="property">Popularity</p>\n            </li>\n            <li class="film-properties__item">\n              <p class="property">Original Title</p>\n            </li>\n            <li class="film-properties__item">\n              <p class="property">Genre</p>\n            </li>\n          </ul>\n          <ul class="film-value">\n            <li class="film-value__item">\n              <p class="value">\n                <span class="value--red">${r}</span><span class="value--gray"> / </span>\n                <span class="value--gray-bg">${c}</span>\n              </p>\n            </li>\n            <li class="film-value__item">\n              <p class="value">${s}</p>\n            </li>\n            <li class="film-value__item">\n              <p class="value">${o}</p>\n            </li>\n            <li class="film-value__item">\n              <p class="value">${a}</p>\n            </li>\n          </ul>\n        </div>\n        <div class="about-film__description">\n          <h4 class="description__title">About</h4>\n          <p class="description">${v}</p>\n        </div>\n        <div class="youtube-container">\n          <a href="${b}" class="youtube-link tube" data-modal-close>Trailer</a>\n        </div>\n        <div class="button__wrapper" id="buttonWrapper">\n  <button data-id="${e}" class="add-to-watched" type="button" data-value="${w?"add":"no"}" id="btn-watched">\n    ${w||"add to Watched"}\n  </button>\n  <button data-id="${e}" class="add-to-queue" type="button" data-value="${q?"add":"no"}" id="btn-queue">\n    ${q||"add to queue"}\n  </button>\n                </div>\n            </div>`,p=document.querySelector("#btn-watched"),m=document.querySelector("#btn-queue"),p.addEventListener("click",g),m.addEventListener("click",f)}catch(e){console.log(e)}}async function g({target:e}){const t=e.dataset.id;"add"===e.dataset.value?(u.removeMovieFromWatched(t),e.textContent="add to Watched",e.dataset.value="no",d.classList.contains("header-nav__title--active")&&await(0,c.forWatched)()):(u.addToWatched(t),e.textContent="remove at Watched",e.dataset.value="add")}async function f({target:e}){const t=e.dataset.id;"add"===e.dataset.value?(u.removeMovieFromQueue(t),e.textContent="add to queue",e.dataset.value="no",d.classList.contains("header-nav__title--active")&&await(0,c.forQueue)()):(u.addToQueue(t),e.textContent="remove at queue",e.dataset.value="add")}document.addEventListener("DOMContentLoaded",(function(e){e.preventDefault();["data-modal","team-modal"].forEach((e=>{const t=e+"-open",a=e+"-close",n=document.querySelector("["+e+"]");n||function(e){const t="color: #BADA55";console.log("%c"+e,t)}("Can`t find Modal with attribute "+n);function l(){document.body.classList.toggle("modal-open"),n.classList.toggle("is-hidden")}document.body.addEventListener("click",(function(e){const n=e.target,o=n.closest("["+t+"]"),i=n.closest("["+a+"]");o?("film__img"===n.className&&v(n.dataset),l()):i&&l()}))}))}),!1);const h=document.querySelector(".films-list");let y="topFilmsCollection",_=1,b="";(0,l.getDataFilm)(i.default.popularFilm,{language:"en-US"}).then((({results:e})=>{console.log(e),h.innerHTML=(0,o.filmCardMacker)(e),y="topFilmsCollection"}));const w=document.querySelector(".header-nav__input");console.log("inputSearchEll----",w);const q=document.querySelector(".header-error-text");let M;w.addEventListener("input",(function(){clearTimeout(M),M=setTimeout((function(){if(b=w.value.trim(),console.log("querySearch ---",b,b.length),0===b.length)return clearTimeout(M),s.Notify.info("введіть текст для пошуку кінофільмів");(0,l.getDataFilm)(i.default.searchMovie,{query:b}).then((({results:e})=>{if(console.log(e),0===e.length)return clearTimeout(M),void q.classList.remove("visually-hidden");h.innerHTML=(0,o.filmCardMacker)(e),y="currentSearchMovieCollection",q.classList.add("visually-hidden")})),console.log("Текст був введений більше ніж 2 секунди тому.")}),1500)}));const L=document.querySelector(".page--active");console.log("activePagePaginationEll----",L),_=Number(L.textContent),console.log(_),L.addEventListener("click",(function(e){switch(y){case"topFilmsCollection":(0,l.getDataFilm)(i.default.popularFilm,{language:"en-US",page:_}).then((({results:e})=>{console.log(e),h.innerHTML=(0,o.filmCardMacker)(e)}));break;case"currentSearchMovieCollection":(0,l.getDataFilm)(i.default.searchMovie,{query:b,page:_}).then((({results:e})=>{console.log(e),h.innerHTML=(0,o.filmCardMacker)(e)}));break;default:console.log("Упс, щось пішло не так")}}));
//# sourceMappingURL=index.b930c676.js.map
